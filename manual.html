<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>スマ勤サポートアプリ 操作手順書</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f7f7f7;
            color: #333;
        }
        h1, h2, h3 {
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .example {
            background-color: #e9ecef;
            border-left: 4px solid #007bff;
            padding: 10px;
            margin: 10px 0;
        }
        .actions {
            margin-top: 20px;
            display: flex;
            gap: 8px;
        }
        .actions a {
            display: block;
            padding: 10px 16px;
            font-size: 20px;
            background-color: #333;
            color: white;
            border: 1px solid #aaa;
            border-radius: 5px;
            text-decoration: none;
            text-align: center;
            flex-grow: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>スマ勤サポートアプリの設定と使用方法</h1>
        <p>この手順書では、スマートフォンでスマ勤サポートアプリを設定および使用する方法を説明します。</p>

        <h2>前提条件</h2>
        <ul>
            <li>スマートフォン（例：iPhone、Android）</li>
            <li>インターネット接続</li>
        </ul>

        <h2>1. スマ勤サポートアプリのインストール</h2>
        <ol>
            <li>スマートフォンのウェブブラウザ（例：Safari、Chrome）を開き、スマ勤サポートアプリのURLにアクセスします。</li>
            <li>「スマ勤サポートアプリ」ページが表示されます。</li>
            <li>サービスワーカーがサポートされているブラウザでは、ページにアクセスすると自動的にサービスワーカーが登録されます。</li>
            <li>ブラウザの右上または下部に「インストール」や「ホーム画面に追加」のオプションが表示される場合、それをタップします。</li>
        </ol>
        <div class="example">
            例：Safariでは「共有メニュー」→「ホーム画面に追加」をタップします。
        </div>

        <h2>2. アプリの初期設定</h2>
        <ol>
            <li>アプリを開くと、入力フィールドとボタンがある画面が表示されます。</li>
            <li>初回アクセス時には、以下のようにデフォルト値が設定されています：
                <ul>
                    <li>メールアドレス：「mail@address.com」</li>
                    <li>日付：今日の日付（例：2024-06-08）</li>
                    <li>始業時刻：「08:30」</li>
                    <li>終業時刻：「17:15」</li>
                </ul>
            </li>
        </ol>

        <h2>3. 勤務データの入力</h2>
        <ol>
            <li><strong>メールアドレスの入力</strong>
                <ul>
                    <li>「宛先メールアドレス」フィールドに会社の受付メールアドレスを入力します。</li>
                </ul>
                <div class="example">
                    例：「example@company.com」と入力します。
                </div>
            </li>
            <li><strong>日付の選択</strong>
                <ul>
                    <li>「日付」フィールドをタップし、カレンダーから勤務日の日付を選択します。</li>
                </ul>
                <div class="example">
                    例：勤務日が2024年6月9日の場合、「2024-06-09」を選択します。
                </div>
            </li>
            <li><strong>年休の登録</strong>
                <ul>
                    <li>年休を取得した日は「年休」チェックボックスをオンにします。</li>
                    <li>始業・終業時刻が入力できなくなり、「メール作成」ボタンが「登録」ボタンに変わります。</li>
                    <li>登録ボタンを押すと年休としてログに保存されます。</li>
                </ul>
            </li>
            <li><strong>AM/PM休の利用</strong>
                <ul>
                    <li>「AM休」または「PM休」をチェックすると時刻入力はそのまま有効です。</li>
                    <li>AM休は8:30から昼休み開始時刻まで、PM休は昼休み終了時刻から17:15まで働いたものとして入力時刻を加算して計算されます。</li>
                    <li>AM休で昼休みより前の時刻、PM休で昼休みより後の時刻を入力すると警告が表示されます。</li>
                    <li>この場合も「メール作成」ボタンが「登録」ボタンとなり、押すとログに保存されます。</li>
                </ul>
            </li>
            <li><strong>始業時刻と終業時刻の入力</strong>
                <ul>
                    <li>「始業時刻」フィールドをタップし、勤務開始時刻を選択します。</li>
                    <li>「終業時刻」フィールドをタップし、勤務終了時刻を選択します。</li>
                </ul>
                <div class="example">
                    例：始業時刻に「08:30」、終業時刻に「17:15」を選択します。
                </div>
            </li>
            <li><strong>中断時間の入力</strong>
                <ul>
                    <li>作業を中断した場合は「中断開始時刻」と「中断終了時刻」を入力します。</li>
                    <li>入力された中断時間は勤務時間から差し引かれ、残業時間計算に反映されます。</li>
                </ul>
            </li>
            <li><strong>業務内容の入力</strong>
                <ul>
                    <li>業務内容、分類、工数を入力します。</li>
                    <li>業務コードが英字で始まる場合は10桁で入力してください。</li>
                </ul>
                <div class="example">
                    例：
                    <ul>
                        <li>「業務1」フィールドに「AB01234567」と入力します。</li>
                        <li>「分類1」フィールドに「00001」と入力します。</li>
                        <li>「工数1」フィールドに「3.50」と入力します。</li>
                    </ul>
                </div>
                <p>メニューから「業務1コピー」を選択すると、コピーの前に確認ダイアログが表示され、
                    承認すると業務番号1の値を他の業務番号欄にコピーできます。</p>
            </li>
            <li><strong>グループ数の選択</strong>
                <ul>
                    <li>画面下部の「表示するグループの数」で1〜10から選択すると、入力欄の表示数が変わります。</li>
                </ul>
                <div class="example">例：3を選ぶと業務入力欄が3セット表示されます。</div>
            </li>
        </ol>

        <h2>4. 入力内容の確認</h2>
        <ol>
            <li>すべての入力が完了したら、「入力確認」ボタンをタップします。</li>
            <li>入力内容が自動的にチェックされ、問題がある場合は警告メッセージが表示されます。</li>
            <ul>
                <li><strong>過去の日付警告</strong>: 過去の日付が指定されている場合、「過去の日付が指定されています。」と警告が表示されます。
                    <div class="example">例：今日が2024年6月8日で、2024年6月7日を選択している場合。</div>
                </li>
                <li><strong>工数の不一致警告</strong>: 勤務時間が作業工数より少ない場合、「勤務時間が作業工数より少ないです。」と警告が表示されます。
                    <div class="example">例：勤務時間が8時間で、入力工数が9時間の場合。</div>
                </li>
            </ul>
            <li>問題がない場合、「問題は見つかりませんでした」と表示されます。</li>
        </ol>

        <h2>5. メールの送信</h2>
        <ol>
            <li>入力内容に問題がない場合、「メール作成」ボタンをタップします。</li>
            <li>未来の日時が入力されているときは「未来の日時が入力されています」と表示され、送信は中止されます。</li>
            <li>生成されたメール内容が表示され、スマートフォンのメールアプリが自動的に開きます。</li>
            <li>メールクライアントで送信先を確認し、メールを送信します。</li>
        </ol>

        <h2>6. 設定画面の利用</h2>
        <ol>
            <li>メニューから「設定」を選ぶと休憩時間の設定画面が開きます。</li>
            <li>昼休み開始・終了、夕休み開始・終了を入力して「保存」を押します。</li>
            <li>設定内容はローカルストレージに保存され、次回起動時に反映されます。</li>
        </ol>

        <h2>7. ログ画面の利用</h2>
        <ol>
            <li>トップページ右上のメニューから「ログ表示」を選ぶとログ画面が開きます。</li>
            <li>「納期ログ表示」では開始日と終了日を指定して期間内の勤務時間を集計できます。</li>
            <li>「ログをクリア」ボタンを押すと保存済みのログを削除できます。</li>
            <li>「CSVダウンロード」ボタンで現在のログをCSVファイルとして保存できます。</li>
            <li>中断時間の記録は「中断時刻」として表示され、勤務時間列に中断時間が表示されます。</li>
            <li>各行の「編集」ボタンを押すとポップアップが開き、日付・始業時刻・終業時刻の編集や削除ができます。削除後は直前の操作を「UNDO」ボタンで取り消せます。</li>
            <li>ログが消失した場合、バックアップから自動的に復元されます。</li>
            <li>画面上部の年月選択欄で対象月を選ぶと、その月の勤務時間が集計表示されます。</li>
        </ol>

        <h2>備考</h2>
        <ul>
            <li><strong>サービスワーカー</strong>: アプリはオフラインでも動作するように、サービスワーカーを利用しています。サービスワーカーは、<code>/index.html</code> や <code>manifest.json</code> などのリソースをキャッシュに保存します。これにより、インターネット接続がなくてもアプリを使用できます。初回アクセス時に自動的に登録され、後のアクセス時にキャッシュからデータを読み込みます。</li>
            <li><strong>ローカルストレージ</strong>: アプリは入力データをローカルストレージに保存します。これにより、次回アクセス時にも前回の入力データが保持されます。例えば、メールアドレスや業務内容などが自動的に入力されます。これにより、毎回同じ情報を入力する手間が省けます。</li>
            <li><strong>更新</strong>: メニューの「更新」を選ぶと最新コードを取得して再読み込みします。ページには「更新中...」と表示されます。</li>
            <li><strong>日付のバリデーション</strong>: 過去の日付が選択されると警告が表示されます。これにより、誤って過去の日付を入力するミスを防ぐことができます。</li>
            <li><strong>入力漏れ警告</strong>: アプリ起動時に過去2回の平日ログを確認し、入力がない場合は日付を示して警告します。</li>
        </ul>
    </div>
    <div class="actions">
        <a href="index.html">戻る</a>
    </div>
</body>
</html>
