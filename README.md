# sumakin
## スマ勤サポートアプリの使い方

### 1. アプリのインストール
* **ブラウザでアプリを開く**: スマートフォンのブラウザで [https://smartkinmu.github.io/sumakin/](https://smartkinmu.github.io/sumakin/) を開きます。
* **インストール**: ブラウザのメニューから「ホーム画面に追加」を選択します。

### 2. アプリの基本操作
* **メールアドレスの設定**: 初回起動時に「宛先メールアドレス」にスマ勤受付用メールアドレスを入力します。
* **日付の設定**: 「日付」から作業日の日付を選びます。
* **勤務時間の入力**: 「始業時刻」と「終業時刻」を設定します。
* **中断時間の入力**: 必要に応じて「中断開始時刻」と「中断終了時刻」を入力します。始業から終業の範囲外は警告されます。
* **年休の登録**: 年休を取得した日は「年休」にチェックを入れると始業・終業時刻が入力できなくなります。この状態で「メール作成」ボタンが「登録」ボタンとなり、押すと年休としてログに保存されます。
* **AM/PM休**: AM休を選ぶと8:30から昼休み開始時刻まで、PM休を選ぶと昼休み終了時刻から17:15まで働いたものとして入力した時刻を加算して計算します。AM休で昼休みより前の時刻、PM休で昼休みより後の時刻を入力すると警告が表示されます。メール作成ボタンが「登録」ボタンとなり、押すとログに保存されます。
* **休憩時間設定**: メニューの「設定」から昼休みと夕休みの時間を変更できます。変更内容は次回起動時に復元されます。

### 3. 業務内容の入力
* 各業務について、業務名、分類、工数、備考を入力します（最大10業務まで）。
* 必要に応じて、画面下部の「表示するグループの数」から業務グループ数を選択できます。
* 1つ目の業務番号を他の欄へコピーしたい場合は、メール作成ボタン右のメニューから
  「業務1コピー」を選択します。確認ダイアログ承認後にコピーが実行されます。
* その他の機能（更新やログ表示など）は、同じメニューから選択できます。

### 4. 入力の確認と保存
* **入力チェック**: 入力内容の確認と工数の自動補完を行います。
* **メールを作成**: 入力内容を基にメール本文を自動生成し、メールアプリを起動します。

### 5. よくある質問
* **工数の自動補完**: 勤務時間と入力工数に差分がある場合は、空の工数フィールドに自動的に補完されます。
* **分類の文字数**: 分類は5桁の数字に制限されています。
* **業務コードの桁数**: 英字で始まる場合は10桁で入力してください。
* **始業と終業の順序**: 始業時刻が終業時刻より遅い場合は警告が表示されます。
* **リフレッシュしても消えない項目**: ローカルストレージに保存されたデータ（メールアドレス、業務名、分類、備考）はリフレッシュ後も残ります。
* **入力漏れ警告**: アプリ起動時に直近2回分の平日ログを確認し、未入力の日があると警告を表示します。

### ログ表示機能
* メニューの「ログ表示」から、保存された勤務ログを表形式で確認できます。
* 「納期ログ表示」では任意の開始日と終了日を指定してログを確認し集計できます。
* 各行には日付、始業時刻、終業時刻、勤務時間、残業時間が表示されます。
* 中断を登録すると、"中断時間" 行が追加され開始・終了時刻と中断時間が確認できます。
* ログ画面では「ログをクリア」ボタンで内容を削除できます。
* 「CSVダウンロード」ボタンからログをCSV形式で保存できます。
* 各行の「編集」ボタンを押すとポップアップが表示され、日付・始業時刻・終業時刻の編集や削除ができます。削除後は直前の操作をUNDOボタンで取り消せます。
* 月別集計はローカルストレージに保存されたログのみを使用して計算されます。
* ログが消失した場合は自動でバックアップから復元されます。
### バージョン管理ルール
詳細は [VERSIONING.md](./VERSIONING.md) を参照してください。
